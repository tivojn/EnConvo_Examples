<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Big Adventure - Oxford Reading Tree</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <h1 class="title">The Big Adventure</h1>
        <div class="progress-container">
            <div class="progress-bar" id="progressBar"></div>
        </div>
        
        <div class="book">
            <!-- Cover Page -->
            <div class="page active" id="page-cover">
                <h2 class="subtitle">Oxford Reading Tree</h2>
                <img src="downloads/cover.png" alt="Cover - Biff, Chip and Kipper" class="story-image">
                <p class="story-text">Join Biff, Chip, Kipper, and their dog Floppy on an exciting adventure at the park!</p>
                <div class="audio-controls">
                    <button class="audio-button play-narration" data-audio="cover_narration">
                        <i class="fas fa-play"></i> Play Narration
                    </button>
                </div>
            </div>

            <!-- Page 1 -->
            <div class="page" id="page-1">
                <h2 class="subtitle">Page 1</h2>
                <img src="downloads/page1_toys.png" alt="Children playing with toys" class="story-image">
                <p class="story-text">Biff, Chip, and Kipper were playing with their toys in the garden. They had blocks, cars, and other fun toys.</p>
                <div class="audio-controls">
                    <button class="audio-button play-narration" data-audio="page1_narration">
                        <i class="fas fa-play"></i> Play Narration
                    </button>
                    <button class="audio-button play-sound" data-audio="toys_sound_effect">
                        <i class="fas fa-volume-up"></i> Toy Sounds
                    </button>
                </div>
            </div>

            <!-- Page 2 -->
            <div class="page" id="page-2">
                <h2 class="subtitle">Page 2</h2>
                <img src="downloads/page2_walking.png" alt="Walking to the park with Floppy" class="story-image">
                <p class="story-text">"Let's go to the park," said Mom. "We can take Floppy with us." The children walked to the park with their dog Floppy.</p>
                <div class="audio-controls">
                    <button class="audio-button play-narration" data-audio="page2_narration">
                        <i class="fas fa-play"></i> Play Narration
                    </button>
                    <button class="audio-button play-sound" data-audio="walking_sound_effect">
                        <i class="fas fa-volume-up"></i> Walking Sounds
                    </button>
                </div>
            </div>

            <!-- Page 3 -->
            <div class="page" id="page-3">
                <h2 class="subtitle">Page 3</h2>
                <img src="downloads/page3_ball.png" alt="Kipper finding a ball" class="story-image">
                <p class="story-text">"Look!" said Kipper. "I found a ball." The children played catch with the red ball. Floppy watched them play.</p>
                <div class="audio-controls">
                    <button class="audio-button play-narration" data-audio="page3_narration">
                        <i class="fas fa-play"></i> Play Narration
                    </button>
                    <button class="audio-button play-sound" data-audio="ball_bouncing_sound_effect">
                        <i class="fas fa-volume-up"></i> Ball Sounds
                    </button>
                </div>
            </div>

            <!-- Page 4 -->
            <div class="page" id="page-4">
                <h2 class="subtitle">Page 4</h2>
                <img src="downloads/page4_ball_in_pond.png" alt="Ball in the pond" class="story-image">
                <p class="story-text">Oh no! The ball went too far and landed in the pond. "What will we do now?" asked Biff. They all looked at the ball floating on the water.</p>
                <div class="audio-controls">
                    <button class="audio-button play-narration" data-audio="page4_narration">
                        <i class="fas fa-play"></i> Play Narration
                    </button>
                    <button class="audio-button play-sound" data-audio="pond_splash_sound_effect">
                        <i class="fas fa-volume-up"></i> Splash Sound
                    </button>
                </div>
            </div>

            <!-- Page 5 -->
            <div class="page" id="page-5">
                <h2 class="subtitle">Page 5</h2>
                <img src="downloads/page5_floppy_jumping.png" alt="Floppy jumping into the pond" class="story-image">
                <p class="story-text">Suddenly, Floppy ran to the pond. Splash! He jumped into the water. "Floppy is going to get the ball!" shouted Chip.</p>
                <div class="audio-controls">
                    <button class="audio-button play-narration" data-audio="page5_narration">
                        <i class="fas fa-play"></i> Play Narration
                    </button>
                </div>
            </div>

            <!-- Page 6 -->
            <div class="page" id="page-6">
                <h2 class="subtitle">Page 6</h2>
                <img src="downloads/page6_floppy_retrieving.png" alt="Floppy retrieving the ball" class="story-image">
                <p class="story-text">Floppy swam to the ball and grabbed it in his mouth. Then he brought it back to the children. "Good dog, Floppy!" they all cheered. What a brave dog!</p>
                <div class="audio-controls">
                    <button class="audio-button play-narration" data-audio="page6_narration">
                        <i class="fas fa-play"></i> Play Narration
                    </button>
                    <button class="audio-button play-sound" data-audio="happy_children_sound_effect">
                        <i class="fas fa-volume-up"></i> Cheering Sounds
                    </button>
                </div>
            </div>
        </div>

        <div class="nav-buttons">
            <button class="nav-button" id="prevBtn" disabled><i class="fas fa-arrow-left"></i> Previous</button>
            <button class="nav-button" id="nextBtn">Next <i class="fas fa-arrow-right"></i></button>
        </div>
    </div>

    <!-- Audio Elements -->
    <audio id="cover_narration" src="../audio/cover_narration.mp3"></audio>
    <audio id="page1_narration" src="../audio/page1_narration.mp3"></audio>
    <audio id="page2_narration" src="../audio/page2_narration.mp3"></audio>
    <audio id="page3_narration" src="../audio/page3_narration.mp3"></audio>
    <audio id="page4_narration" src="../audio/page4_narration.mp3"></audio>
    <audio id="page5_narration" src="../audio/page5_narration.mp3"></audio>
    <audio id="page6_narration" src="../audio/page6_narration.mp3"></audio>
    
    <audio id="toys_sound_effect" src="../audio/toys_sound_effect.mp3"></audio>
    <audio id="walking_sound_effect" src="../audio/walking_sound_effect.mp3"></audio>
    <audio id="ball_bouncing_sound_effect" src="../audio/ball_bouncing_sound_effect.mp3"></audio>
    <audio id="pond_splash_sound_effect" src="../audio/pond_splash_sound_effect.mp3"></audio>
    <audio id="happy_children_sound_effect" src="../audio/happy_children_sound_effect.mp3"></audio>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const pages = document.querySelectorAll('.page');
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            const progressBar = document.getElementById('progressBar');
            let currentPage = 0;
            const totalPages = pages.length;

            // Update progress bar
            function updateProgressBar() {
                const progress = ((currentPage) / (totalPages - 1)) * 100;
                progressBar.style.width = `${progress}%`;
            }

            // Show current page
            function showPage(pageIndex) {
                pages.forEach((page, index) => {
                    if (index === pageIndex) {
                        page.classList.add('active');
                    } else {
                        page.classList.remove('active');
                    }
                });

                // Update navigation buttons
                prevBtn.disabled = pageIndex === 0;
                nextBtn.disabled = pageIndex === totalPages - 1;
                
                // Update page number in URL for bookmarking
                window.location.hash = `page-${pageIndex}`;
                
                // Update progress bar
                updateProgressBar();
            }

            // Navigation event listeners
            prevBtn.addEventListener('click', function() {
                if (currentPage > 0) {
                    currentPage--;
                    showPage(currentPage);
                    stopAllAudio();
                }
            });

            nextBtn.addEventListener('click', function() {
                if (currentPage < totalPages - 1) {
                    currentPage++;
                    showPage(currentPage);
                    stopAllAudio();
                }
            });

            // Audio controls
            const narrationButtons = document.querySelectorAll('.play-narration');
            const soundButtons = document.querySelectorAll('.play-sound');

            // Function to stop all audio
            function stopAllAudio() {
                document.querySelectorAll('audio').forEach(audio => {
                    audio.pause();
                    audio.currentTime = 0;
                });
                
                // Reset all buttons
                narrationButtons.forEach(button => {
                    button.innerHTML = '<i class="fas fa-play"></i> Play Narration';
                });
                
                soundButtons.forEach(button => {
                    const soundName = button.textContent.trim().replace('Play ', '');
                    button.innerHTML = `<i class="fas fa-volume-up"></i> ${soundName}`;
                });
            }

            // Narration button listeners
            narrationButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const audioId = this.getAttribute('data-audio');
                    const audio = document.getElementById(audioId);
                    
                    if (audio.paused) {
                        stopAllAudio();
                        audio.play();
                        this.innerHTML = '<i class="fas fa-pause"></i> Pause Narration';
                        
                        audio.onended = function() {
                            button.innerHTML = '<i class="fas fa-play"></i> Play Narration';
                        };
                    } else {
                        audio.pause();
                        this.innerHTML = '<i class="fas fa-play"></i> Play Narration';
                    }
                });
            });

            // Sound effect button listeners
            soundButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const audioId = this.getAttribute('data-audio');
                    const audio = document.getElementById(audioId);
                    const soundName = this.textContent.trim().replace('Play ', '');
                    
                    stopAllAudio();
                    audio.play();
                    
                    audio.onended = function() {
                        button.innerHTML = `<i class="fas fa-volume-up"></i> ${soundName}`;
                    };
                });
            });

            // Keyboard navigation
            document.addEventListener('keydown', function(e) {
                if (e.key === 'ArrowLeft' && !prevBtn.disabled) {
                    prevBtn.click();
                } else if (e.key === 'ArrowRight' && !nextBtn.disabled) {
                    nextBtn.click();
                }
            });

            // Check for hash in URL to load specific page
            const hash = window.location.hash;
            if (hash) {
                const pageMatch = hash.match(/page-(\d+)/);
                if (pageMatch && pageMatch[1]) {
                    const pageIndex = parseInt(pageMatch[1]);
                    if (pageIndex >= 0 && pageIndex < totalPages) {
                        currentPage = pageIndex;
                        showPage(currentPage);
                    }
                }
            }

            // Initialize progress bar
            updateProgressBar();
        });
    </script>
</body>
</html>